{% extends "page.html" %}

{% block css %}
{{ block.super }}
{% if not user.is_authenticated %}
<style>
    body {
      /* fallback */
      background-color: #DCEDC8;
      /* Safari 4-5, Chrome 1-9 */
      background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#DCEDC8), to(#ECEFF1));
      /* Safari 5.1, Chrome 10+ */
      background: -webkit-linear-gradient(top, #ECEFF1, #DCEDC8);
      /* Firefox 3.6+ */
      background: -moz-linear-gradient(top, #ECEFF1, #DCEDC8);
      /* IE 10 */
      background: -ms-linear-gradient(top, #ECEFF1, #DCEDC8);
      /* Opera 11.10+ */
      background: -o-linear-gradient(top, #ECEFF1, #DCEDC8);
    }
</style>
{% endif %}
{% endblock %}

{% block js %}
{{ block.super }}
<script>
$(function(){
	setInterval('console.log(\'some ajax call for new notifications will go here\');', 2000);
		$('.cm-notification .close').click(function(){
		// make call to back-end to remove this from notifications
		$(this).parent().parent().remove();
	});
});
</script>
{% endblock %}

{% block content-header %}
{% endblock %}
{% block content %}
    {% if user.is_authenticated %}
        <div class="col-xs-12 col-sm-8 col-sm-offset-2">
        <h1>{{ user_profile.nickname }}</h1>
        <table class="table table-striped table-bordered table-responsive" id="user-profile-info">
        <tbody>
            <tr>   
                <td><b>Account type</b></td>
                <td>
                    {% if is_instructor %}
                        Instructor
                    {% else %}
                        Student
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td><b>E-mail address</b></td><td>{{ user.email }}</td>
            </tr>
            <tr>
                <td><b>Username</b></td><td>{{ user.username }}</td>
            </tr>
            <tr>
                <td><b>My School</b></td>
                <td>
                    {% if user_profile.school %}
                        <a href="/school/{{ user_profile.school.id }}">{{ user_profile.school }}</a>
                    {% else %}
                        You're not enrolled in a school.
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td><b>My Courses</b></td>
                <td>
                    {% if courses %}
                    <ul>
                        {% for course in courses %}
                        <li>
                            <a href="/school/course/{{course.id}}">{{ course }} ({{ course.code }})</a>
                        </li>
                        {% endfor %}
                    {% else %}
			{% if is_instructor %}
			You're not teaching any courses.
			{% else %}
                        You're not enrolled in any courses.
			{% endif %}
                    {% endif %}
                    </ul>
                </td>
            </tr>
        </tbody>
        </table>
            <a class="btn btn-primary btn-lg" href="/edit-profile"><span class="glyphicon glyphicon-pencil"></span>Edit Profile</a>
            <a class="btn btn-primary btn-lg" href="/user/{{ user.id }}/calendar"><span class="glyphicon glyphicon-calendar"></span> Calendar</a>
                        <a class="btn btn-primary btn-lg" href="/school/search"><span class="glyphicon glyphicon-tower"></span>
                {% if user_profile.school %}
                    Switch schools 
            	    </a>
            		{% if is_instructor %}
        	    <a class="btn btn-primary btn-lg" href="/school/course/create"><span class="glyphicon glyphicon-tower"></span>Create a Course</a>
            		{% else %}
                    <a class="btn btn-primary btn-lg" href="/school/{{ user_profile.school.id }}"><span class="glyphicon glyphicon-tower"></span>Enrol in a Course</a>
            {% endif %}
                {% else %}
                    Find your school
            </a>
                {% endif %}
          </table>
	  <h2>Notifications <span class="badge">2</span></h2>
	<a class="pull-right" href="#">Delete All</a>
	<table class="table table-hover table-bordered table-striped">
		<tbody>
		<tr class="cm-notification"><td>
		    Updated! <strong>CSC301</strong> Phase 1 deadline, Sept. 31, 2014. <a href="#">More details...</a>
		    <button type="button" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Delete</span></button>
    </td></tr>
		<tr class="cm-notification"><td>
		    New! <strong>CSC301</strong> Phase 1 deadline, Sept. 30, 2014. <a href="#">More details...</a>
		    <button type="button" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Delete</span></button>
    </td></tr>
		</tbody>
	  </table>
	  
        </div>
    {% else %}
        <div class="col-xs-12 col-sm-4 col-sm-offset-4" id="hey-stranger">
            <h1>Hey Stranger! </h1>
            <p>We noticed you're not logged in. You have two options here:</p>
            <div class="text-center">
            <a class="btn btn-primary btn-lg" href="/register">
                <span class="glyphicon glyphicon-thumbs-up"></span> Register
            </a>
            </div>

            <hr>

            <p class="text-center">
            <a class="btn btn-primary btn-lg" href="/login">
                <span class="glyphicon glyphicon-log-in"></span> Login
            </a>
            </p>
        </div>
    {% endif %}
{% endblock %}
